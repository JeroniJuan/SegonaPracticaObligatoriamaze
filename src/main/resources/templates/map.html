<!doctype html>
<html lang="ca" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/map.css">
    <script src="/js/map.js" defer></script>
    <title>Mapa</title>
</head>
<body>
<div>
    <h1>Jugant mapa: <span th:text="${mapid}"></span></h1>
</div>
<div>
    <h4 th:text="${gameMessage}"></h4>
</div>
<div>
    <p>Habitació actual: <span th:text="${currentRoomName}"></span></p>
    <p>Numero monedes: <span th:text="${coinAmount}"></span></p>
    <p>Claus que tens: <span th:text="${keys}"></span></p>
    <a href="/reset">Reiniciar partida.</a>
</div>
<div style="display: flex; align-items: center;">
    <canvas id="roomCanvas" width="450" height="450"></canvas>

    <div class="nav-buttons" style="display: flex; flex-direction: column; justify-content: center; align-items: center; margin-left: 20px;">
        <form action="/nav" method="post" onsubmit="updateTimePassed(this)">
            <input type="hidden" name="direction" value="N">
            <input type="hidden" name="timePassed" id="timePassedN">
            <button type="submit" style="font-size: 24px; margin-bottom: 10px;">⬆️</button>
        </form>
        <div style="display: flex; justify-content: space-between;">
            <form action="/nav" method="post" onsubmit="updateTimePassed(this)">
                <input type="hidden" name="direction" value="W">
                <input type="hidden" name="timePassed" id="timePassedW">
                <button type="submit" style="font-size: 24px;">⬅️</button>
            </form>
            <form action="/nav" method="post" onsubmit="updateTimePassed(this)">
                <input type="hidden" name="direction" value="E">
                <input type="hidden" name="timePassed" id="timePassedE">
                <button type="submit" style="font-size: 24px;">➡️</button>
            </form>
        </div>
        <form action="/nav" method="post" onsubmit="updateTimePassed(this)">
            <input type="hidden" name="direction" value="S">
            <input type="hidden" name="timePassed" id="timePassedS">
            <button type="submit" style="font-size: 24px; margin-top: 10px;">⬇️</button>
        </form>
    </div>

</div>


<input type="hidden" id="roomid" name="roomid" th:value="${currentRoom}">
<input type="hidden" id="mapid" name="mapid" th:value="${mapid}">
<input type="hidden" id="timePassed" name="timePassed" th:value="${timePassed}">
<input type="hidden" id="north" name="north" th:value="${north}" th:data-open="${north?.open}">
<input type="hidden" id="east" name="east" th:value="${east}" th:data-open="${east?.open}">
<input type="hidden" id="west" name="west" th:value="${west}" th:data-open="${west?.open}">
<input type="hidden" id="south" name="south" th:value="${south}" th:data-open="${south?.open}">
<input type="hidden" id="key" name="key" th:value="${key}">
<input type="hidden" id="coin" name="coin" th:value="${coin}">

</body>
<footer>
    <p><a href="/start">Retorna a inici.</a></p>
</footer>
</html>
